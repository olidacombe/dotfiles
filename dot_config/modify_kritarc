#!/bin/bash
# chezmoi modify script for kritarc
# Adds PythonPlugins=layer_solo_nav if not present

if [ -f "$1" ]; then
    # File exists, check if PythonPlugins is already set
    if grep -q "^PythonPlugins=" "$1"; then
        # Already has PythonPlugins line, ensure layer_solo_nav is included
        if ! grep "^PythonPlugins=" "$1" | grep -q "layer_solo_nav"; then
            # Add layer_solo_nav to existing PythonPlugins
            sed -i 's/^PythonPlugins=/PythonPlugins=layer_solo_nav,/' "$1"
        fi
        cat "$1"
    else
        # Add PythonPlugins line at end
        cat "$1"
        echo "PythonPlugins=layer_solo_nav"
    fi
else
    # File doesn't exist, create minimal kritarc
    echo "PythonPlugins=layer_solo_nav"
fi
